# YouTube AI Comment Replier

A production-ready Python CLI app that:
1. Authenticates with your own YouTube account via OAuth.
2. Fetches comments from a target YouTube video.
3. Uses OpenAI to draft a concise community reply.
4. Posts that reply back as a top-level YouTube comment.

This project now supports practical usage across **Windows, macOS, Linux, and Android (via Termux)**.

## Features

- Clean CLI with argument validation
- Safe credential handling (`client_secrets.json`, `token.json`, env vars)
- `--dry-run` mode for safe preview before posting
- Configurable OpenAI model and number of comments
- OAuth mode selection (`--auth-mode auto|local|console`) for desktop/headless/Android workflows
- GitHub Actions workflows to build **Windows `.exe`** and **macOS binary**

## Quick Start

### 1) Clone and install

```bash
git clone https://github.com/<your-username>/YouTubeAICommentReplier.git
cd YouTubeAICommentReplier
python -m venv .venv
# Linux/macOS
source .venv/bin/activate
# Windows PowerShell
# .venv\Scripts\Activate.ps1

pip install -r requirements.txt
```

### 2) Configure credentials

#### OpenAI
Set your API key:

```bash
# Linux/macOS
export OPENAI_API_KEY="your_openai_api_key"

# Windows PowerShell
# $env:OPENAI_API_KEY="your_openai_api_key"
```

Optional model override:

```bash
export OPENAI_MODEL="gpt-4.1-mini"
```

#### YouTube OAuth

1. Open [Google Cloud Console](https://console.cloud.google.com/)
2. Enable **YouTube Data API v3**
3. Create OAuth 2.0 Client ID credentials for **Desktop app**
4. Download JSON and place it in the repo root as:

```text
client_secrets.json
```

On first run, OAuth completes and creates `token.json`.

### 3) Run

Preview only (no posting):

```bash
python YouTubeCommentResponder.py "https://www.youtube.com/watch?v=dQw4w9WgXcQ" --dry-run
```

Post for real:

```bash
python YouTubeCommentResponder.py "https://www.youtube.com/watch?v=dQw4w9WgXcQ"
```

## CLI Options

```text
usage: YouTubeCommentResponder.py [-h] [--max-comments MAX_COMMENTS] [--model MODEL]
                                  [--client-secrets CLIENT_SECRETS] [--token-file TOKEN_FILE]
                                  [--auth-mode {auto,local,console}] [--dry-run]
                                  video_url
```

- `video_url`: Target YouTube video URL.
- `--max-comments`: How many comments to analyze (1-100, default 20).
- `--model`: OpenAI model name (default `OPENAI_MODEL` env or `gpt-4.1-mini`).
- `--client-secrets`: Path to Google OAuth client JSON (default `client_secrets.json`).
- `--token-file`: OAuth token storage path (default `token.json`).
- `--auth-mode`: OAuth flow mode:
  - `auto` (default): local browser callback first, then console fallback
  - `local`: force browser callback flow
  - `console`: best for Android/Termux, SSH, and headless systems
- `--dry-run`: Generate and print response without posting.

## Platform Compatibility

### Windows
- Run via Python, or use the built `.exe` generated by CI/release.

### macOS
- Run via Python (`python3 ...`) directly.
- Or download the macOS binary artifact produced by GitHub Actions.

### Android (Termux)
You can run the app from Android using Termux:

```bash
pkg update && pkg upgrade -y
pkg install -y python git
pip install -r requirements.txt
```

Then run with console OAuth mode:

```bash
python YouTubeCommentResponder.py "https://www.youtube.com/watch?v=dQw4w9WgXcQ" --auth-mode console --dry-run
```

> Note: Android app-style APK packaging is **not included** in this repo; Android support is via Termux CLI execution.

## Build Windows EXE (Local)

```bash
pip install -r requirements.txt
pyinstaller --onefile --name YouTubeCommentResponder YouTubeCommentResponder.py
```

Output:

```text
dist/YouTubeCommentResponder.exe
```

## Build macOS Binary (Local)

```bash
bash scripts/build_macos.sh
```

Output:

```text
dist/YouTubeCommentResponder-macos
```

## Build Binaries on GitHub

This repo includes two workflows:

- `.github/workflows/build-windows-exe.yml`
- `.github/workflows/build-macos-binary.yml`

Both workflows:
- run on `workflow_dispatch`
- run when tags like `v1.0.0` are pushed
- upload build artifacts
- attach binaries to GitHub Releases for version tags

### Release flow

1. Push code to GitHub
2. Create tag:
   ```bash
   git tag v1.0.0
   git push origin v1.0.0
   ```
3. Download assets from release page

## Security Notes

- Do **not** commit:
  - `client_secrets.json`
  - `token.json`
  - `.env`
- Rotate credentials if accidentally exposed.

## Disclaimer

Use responsibly and follow YouTube API Terms and OpenAI policies. You are responsible for content posted by this tool.
